<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Python2 编程入门 &#8211; wi's Tech Blog</title>
<meta name="description" content="notes, articles, or reproduced">
<meta name="keywords" content="python">



<!-- Open Graph -->
<meta property="og:locale" content="zh_CN">
<meta property="og:type" content="article">
<meta property="og:title" content="Python2 编程入门">
<meta property="og:description" content="notes, articles, or reproduced">
<meta property="og:url" content="/dev/python/python2-startup/">
<meta property="og:site_name" content="wi's Tech Blog">
<meta property="og:image" content="/images/images/avatar.png">





<link rel="canonical" href="/dev/python/python2-startup/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="wi's Tech Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->

<meta http-equiv="cleartype" content="on">

<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="/assets/js/scripts.min.js"></script>

<!-- table of content -->
<script type="text/javascript" src="/assets/js/vendor/toc.js"></script>


<!-- Load Modernizr -->
<script type="text/javascript" src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>


<!-- Mathjax Support -->
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body>

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><i class="fa fa-bars"></i></a></li>
      <li class="header-item-title">
        <a href="/">
          
            <img class="logo" src="/images/avatar.png" alt="wi's Tech Blog">
          
          <a href="/" class="title"> wi's Tech Blog</a>
        </a>
      </li>
      
        
        


        
            
                <li class="header-item "><a href="/favorites">fav</a></li>
            
        
      
        
        


        
            
                <li class="header-item "><a href="/categories">Categories</a></li>
            
        
      
        
        


        
            
                <li class="header-item "><a href="/tags">Tags</a></li>
            
        
      
        
        


        
            
                <li class="header-item "><a href="/">Home</a></li>
            
        
      
      <li class="header-item"><a href="/search"><i class="fa fa-search"></i></a></li>
    </ul>
  </div>



<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="/tags"><h3>Tags</h3></a></li>
      
    
      
        <li><a href="/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="/categories/#UML">UML</a></li>
            
              
                <li><a href="/categories/#Windows">Windows</a></li>
            
              
                <li><a href="/categories/#adb">adb</a></li>
            
              
                <li><a href="/categories/#adt">adt</a></li>
            
              
                <li><a href="/categories/#android">android</a></li>
            
              
                <li><a href="/categories/#apache">apache</a></li>
            
              
                <li><a href="/categories/#apple">apple</a></li>
            
              
                <li><a href="/categories/#bat">bat</a></li>
            
              
                <li><a href="/categories/#blog">blog</a></li>
            
              
                <li><a href="/categories/#blog_sample">blog_sample</a></li>
            
              
                <li><a href="/categories/#browser">browser</a></li>
            
              
                <li><a href="/categories/#burpsuite">burpsuite</a></li>
            
              
                <li><a href="/categories/#centos">centos</a></li>
            
              
                <li><a href="/categories/#chrome">chrome</a></li>
            
              
                <li><a href="/categories/#cm">cm</a></li>
            
              
                <li><a href="/categories/#common">common</a></li>
            
              
                <li><a href="/categories/#css">css</a></li>
            
              
                <li><a href="/categories/#cygwin">cygwin</a></li>
            
              
                <li><a href="/categories/#database">database</a></li>
            
              
                <li><a href="/categories/#db">db</a></li>
            
              
                <li><a href="/categories/#dev">dev</a></li>
            
              
                <li><a href="/categories/#device">device</a></li>
            
              
                <li><a href="/categories/#diff">diff</a></li>
            
              
                <li><a href="/categories/#disk">disk</a></li>
            
              
                <li><a href="/categories/#diy">diy</a></li>
            
              
                <li><a href="/categories/#dns">dns</a></li>
            
              
                <li><a href="/categories/#doc">doc</a></li>
            
              
                <li><a href="/categories/#docker">docker</a></li>
            
              
                <li><a href="/categories/#efi">efi</a></li>
            
              
                <li><a href="/categories/#emacs">emacs</a></li>
            
              
                <li><a href="/categories/#email">email</a></li>
            
              
                <li><a href="/categories/#emulator">emulator</a></li>
            
              
                <li><a href="/categories/#english">english</a></li>
            
              
                <li><a href="/categories/#esxi">esxi</a></li>
            
              
                <li><a href="/categories/#excel">excel</a></li>
            
              
                <li><a href="/categories/#exsi">exsi</a></li>
            
              
                <li><a href="/categories/#favorites">favorites</a></li>
            
              
                <li><a href="/categories/#ftp">ftp</a></li>
            
              
                <li><a href="/categories/#game">game</a></li>
            
              
                <li><a href="/categories/#git">git</a></li>
            
              
                <li><a href="/categories/#gitlab">gitlab</a></li>
            
              
                <li><a href="/categories/#go">go</a></li>
            
              
                <li><a href="/categories/#golang">golang</a></li>
            
              
                <li><a href="/categories/#hardware">hardware</a></li>
            
              
                <li><a href="/categories/#ide">ide</a></li>
            
              
                <li><a href="/categories/#internet">internet</a></li>
            
              
                <li><a href="/categories/#java">java</a></li>
            
              
                <li><a href="/categories/#javascript">javascript</a></li>
            
              
                <li><a href="/categories/#jekyll">jekyll</a></li>
            
              
                <li><a href="/categories/#jenkins">jenkins</a></li>
            
              
                <li><a href="/categories/#jmeter">jmeter</a></li>
            
              
                <li><a href="/categories/#kate">kate</a></li>
            
              
                <li><a href="/categories/#kde">kde</a></li>
            
              
                <li><a href="/categories/#ldap">ldap</a></li>
            
              
                <li><a href="/categories/#learn">learn</a></li>
            
              
                <li><a href="/categories/#learning">learning</a></li>
            
              
                <li><a href="/categories/#links">links</a></li>
            
              
                <li><a href="/categories/#linux">linux</a></li>
            
              
                <li><a href="/categories/#living">living</a></li>
            
              
                <li><a href="/categories/#mac">mac</a></li>
            
              
                <li><a href="/categories/#mac-os">mac-os</a></li>
            
              
                <li><a href="/categories/#macos">macos</a></li>
            
              
                <li><a href="/categories/#mail">mail</a></li>
            
              
                <li><a href="/categories/#manjaro">manjaro</a></li>
            
              
                <li><a href="/categories/#markdown">markdown</a></li>
            
              
                <li><a href="/categories/#maven">maven</a></li>
            
              
                <li><a href="/categories/#memcached">memcached</a></li>
            
              
                <li><a href="/categories/#microsoft">microsoft</a></li>
            
              
                <li><a href="/categories/#moco">moco</a></li>
            
              
                <li><a href="/categories/#mysql">mysql</a></li>
            
              
                <li><a href="/categories/#nas">nas</a></li>
            
              
                <li><a href="/categories/#ndk">ndk</a></li>
            
              
                <li><a href="/categories/#netbean">netbean</a></li>
            
              
                <li><a href="/categories/#network">network</a></li>
            
              
                <li><a href="/categories/#netwrok">netwrok</a></li>
            
              
                <li><a href="/categories/#nginx">nginx</a></li>
            
              
                <li><a href="/categories/#nodejs">nodejs</a></li>
            
              
                <li><a href="/categories/#notepad++">notepad++</a></li>
            
              
                <li><a href="/categories/#office">office</a></li>
            
              
                <li><a href="/categories/#open-course">open-course</a></li>
            
              
                <li><a href="/categories/#openkm">openkm</a></li>
            
              
                <li><a href="/categories/#openwrt">openwrt</a></li>
            
              
                <li><a href="/categories/#outlook">outlook</a></li>
            
              
                <li><a href="/categories/#pdf">pdf</a></li>
            
              
                <li><a href="/categories/#perl">perl</a></li>
            
              
                <li><a href="/categories/#phone">phone</a></li>
            
              
                <li><a href="/categories/#php">php</a></li>
            
              
                <li><a href="/categories/#postgresql">postgresql</a></li>
            
              
                <li><a href="/categories/#product">product</a></li>
            
              
                <li><a href="/categories/#python">python</a></li>
            
              
                <li><a href="/categories/#rails">rails</a></li>
            
              
                <li><a href="/categories/#redmine">redmine</a></li>
            
              
                <li><a href="/categories/#regex">regex</a></li>
            
              
                <li><a href="/categories/#router">router</a></li>
            
              
                <li><a href="/categories/#ruby">ruby</a></li>
            
              
                <li><a href="/categories/#search-engine">search-engine</a></li>
            
              
                <li><a href="/categories/#security">security</a></li>
            
              
                <li><a href="/categories/#sed">sed</a></li>
            
              
                <li><a href="/categories/#ssh">ssh</a></li>
            
              
                <li><a href="/categories/#streaming">streaming</a></li>
            
              
                <li><a href="/categories/#study">study</a></li>
            
              
                <li><a href="/categories/#subversion">subversion</a></li>
            
              
                <li><a href="/categories/#tcpdump">tcpdump</a></li>
            
              
                <li><a href="/categories/#tech">tech</a></li>
            
              
                <li><a href="/categories/#testing">testing</a></li>
            
              
                <li><a href="/categories/#testlink">testlink</a></li>
            
              
                <li><a href="/categories/#text">text</a></li>
            
              
                <li><a href="/categories/#tomcat">tomcat</a></li>
            
              
                <li><a href="/categories/#ubuntu">ubuntu</a></li>
            
              
                <li><a href="/categories/#ufw">ufw</a></li>
            
              
                <li><a href="/categories/#vbs">vbs</a></li>
            
              
                <li><a href="/categories/#vim">vim</a></li>
            
              
                <li><a href="/categories/#virtual-box">virtual-box</a></li>
            
              
                <li><a href="/categories/#virtualbox">virtualbox</a></li>
            
              
                <li><a href="/categories/#virtualization">virtualization</a></li>
            
              
                <li><a href="/categories/#vm">vm</a></li>
            
              
                <li><a href="/categories/#vpn">vpn</a></li>
            
              
                <li><a href="/categories/#web">web</a></li>
            
              
                <li><a href="/categories/#windows">windows</a></li>
            
              
                <li><a href="/categories/#xampp">xampp</a></li>
            
              
                <li><a href="/categories/#收藏夹">收藏夹</a></li>
            
              
                <li><a href="/categories/#测试工具">测试工具</a></li>
            
              
                <li><a href="/categories/#玩机">玩机</a></li>
            
          </ul>
        </li>
      
    
      
        <li><a href="/favorites"><h3>fav</h3></a></li>
      
    
  </ul>
</nav>




<div id="post" >
<div id="main" role="main" >
  <article class="hentry">
    <div class="entry-content">
        
      <h1 class="post-title entry-title">Python2 编程入门</h1>
      
        <h3><span class="entry-date date published updated"><time datetime="2018-04-12T00:00:00+08:00">April 12, 2018</time></span></h3>
      
      
      
      
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 60);
  return false
})

$(".toc-button").on('click', function(){
  $(".toc").toggle();
});


$(window).click(function(evt){
  if( !evt.target.matches('.toc') 
      && !evt.target.matches('.toc>ul') 
      && !evt.target.matches('.toc-button') ) {
    $('.toc').each(function(){
      if( $(this).is(":visible") ) {
        $(this).hide();
      }
    });
  }
});

});
</script>

<div class="float-toc">
    <i class="toc-button fa fa-list-ol" aria-hidden="true"></i>
  <div id="toc"></div>
</div>

      
      
      <ul>
  <li>参考
    <ul>
      <li><a href="https://docs.python.org/2/tutorial/index.html">https://docs.python.org/2/tutorial/index.html</a></li>
      <li>&lt;&gt;</li>
      <li>&lt;&gt;</li>
    </ul>
  </li>
</ul>

<h2 id="python-interpreter">Python Interpreter</h2>

<ul>
  <li>参考
    <ul>
      <li><a href="https://docs.python.org/2/using/cmdline.html#using-on-general">Command line and environment</a></li>
      <li><a href="https://docs.python.org/2/tutorial/appendix.html#tut-interac">Interactive Mode</a></li>
    </ul>
  </li>
</ul>

<h3 id="调用解释器">调用解释器</h3>

<ul>
  <li>进入
    <ul>
      <li><code class="highlighter-rouge">python</code> 进入 python console</li>
      <li><code class="highlighter-rouge">python -c command [arg] ...</code>
        <ul>
          <li>usually advised to quote command in its entirety with single quotes.</li>
        </ul>
      </li>
      <li>Some Python modules as scripts: <code class="highlighter-rouge">python -m module [arg] ...</code></li>
    </ul>
  </li>
  <li>退出
    <ul>
      <li>Typing an end-of-file character (Control-D on Unix, Control-Z on Windows)</li>
      <li>exit()</li>
      <li>quit()</li>
    </ul>
  </li>
</ul>

<h3 id="命令行参数">命令行参数</h3>

<p>脚本名称和参数都放在 <code class="highlighter-rouge">sys</code> module 的 <code class="highlighter-rouge">argv</code> 变量。</p>

<ul>
  <li>The length of the list is at least one; when no script and no arguments are given, sys.argv[0] is an empty string.</li>
  <li>When the script name is given as ‘-‘ (meaning standard input), sys.argv[0] is set to ‘-‘.</li>
  <li>When -c command is used, sys.argv[0] is set to ‘-c’.</li>
  <li>When -m module is used, sys.argv[0] is set to the full name of the located module.</li>
</ul>

<h2 id="源代码编码">源代码编码</h2>

<p>默认 Python2 源代码文件使用 <code class="highlighter-rouge">ASCII</code> 编码。</p>

<p>在源文件第一行使用如下格式，指定编码。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="c"># -*- coding: encoding -*-</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ul>
  <li>例子：使用 Windows-1252 编码
    <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="c"># -*- coding: cp-1252 -*-</span>
</pre></td></tr></tbody></table>
</div>
    </div>

    <p>或者，让位 UNIX “shebang” line</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: cp-1252 -*-</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ul>

<h2 id="注释">注释</h2>

<p><code class="highlighter-rouge">#</code> 单行注释，影响范围到行末</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># this is the first comment</span>
<span class="n">spam</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c"># and this is the second comment</span>
          <span class="c"># ... and now a third!</span>
<span class="n">text</span> <span class="o">=</span> <span class="s">"# This is not a comment because it's inside quotes."</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="数值计算">数值计算</h2>

<h3 id="操作符">操作符</h3>

<p><code class="highlighter-rouge">**</code> 2个星号代表乘方，5 ** 2 == 25</p>

<p>其他加减乘除和其他语言一样。</p>

<h2 id="string">String</h2>

<p>单引号，双引号都可以界定字符串字面值。</p>

<h3 id="转义操作符">转义操作符</h3>

<p><code class="highlighter-rouge">\</code> 为转义操作符。在字符串之前加<code class="highlighter-rouge">r</code>关闭转义效果，转义操作符变成普通字符。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="s">'doesn</span><span class="se">\'</span><span class="s">t'</span>  <span class="c"># use \' to escape the single quote...</span>
<span class="s">"doesn't"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">"doesn't"</span>  <span class="c"># ...or use double quotes instead</span>
<span class="s">"doesn't"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'"Isn</span><span class="se">\'</span><span class="s">t," she said.'</span>
<span class="s">"Isn't,"</span> <span class="n">she</span> <span class="n">said</span><span class="o">.</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'C:</span><span class="err">\</span><span class="s">some</span><span class="se">\n</span><span class="s">ame'</span>  <span class="c"># here \n means newline!</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">some</span>
<span class="n">ame</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">r'C:</span><span class="err">\</span><span class="s">some</span><span class="err">\</span><span class="s">name'</span>  <span class="c"># note the r before the quote</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">some</span>\<span class="n">name</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="三引号--or--用来界定多行字符串文本">三引号 “"”…””” or ‘'’…’’’ 用来界定多行字符串文本。</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="c"># 换行字符会自动被当成第一个字符，使用反斜杠 \ 能避免。</span>
<span class="k">print</span> <span class="s">"""</span><span class="se">\
</span><span class="s">Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
"""</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="-连接字符串--重复字符串"><code class="highlighter-rouge">+</code> 连接字符串； <code class="highlighter-rouge">*</code> 重复字符串。</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="c"># 3 times 'un', followed by 'ium'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span> <span class="o">*</span> <span class="s">'un'</span> <span class="o">+</span> <span class="s">'ium'</span>
<span class="s">'unununium'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="2-个相邻字符串字面量自动连接">2 个相邻字符串字面量，自动连接。</h3>

<p>注意，是字面量，不是变量，变量使用 <code class="highlighter-rouge">+</code> 来与字面量连接。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="s">'Py'</span> <span class="s">'thon'</span>
<span class="s">'Python'</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Put several strings within parentheses '</span>
<span class="o">...</span>         <span class="s">'to have them joined together.'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">text</span>
<span class="s">'Put several strings within parentheses to have them joined together.'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="字符串长度-使用-built-in-function-len-获取">字符串长度 ，使用 built-in function len() 获取</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">'supercalifragilisticexpialidocious'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="mi">34</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="字符串是字符数组">字符串是字符数组</h3>

<p>从 0 开始编号。</p>

<p>注意，python 没有 char / 字符这种数据类型，一个 char 就是一个包含但字符的String。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">word</span> <span class="o">=</span> <span class="s">'Python'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c"># character in position 0</span>
<span class="s">'P'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>  <span class="c"># character in position 5</span>
<span class="s">'n'</span>

<span class="c"># 序号可以为负数，从末尾开始计数。negative indices start from -1.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c"># last character</span>
<span class="s">'n'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>  <span class="c"># second-last character</span>
<span class="s">'o'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
<span class="s">'P'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="提取字符串">提取字符串</h3>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre> +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
 0   1   2   3   4   5   6
-6  -5  -4  -3  -2  -1
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">word</span> <span class="o">=</span> <span class="s">'Python'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c"># characters from position 0 (included) to 2 (excluded)</span>
<span class="s">'Py'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>  <span class="c"># characters from position 2 (included) to 5 (excluded)</span>
<span class="s">'tho'</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>   <span class="c"># character from the beginning to position 2 (excluded)</span>
<span class="s">'Py'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>   <span class="c"># characters from position 4 (included) to the end</span>
<span class="s">'on'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>  <span class="c"># characters from the second-last (included) to the end</span>
<span class="s">'on'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="python-strings-cannot-be-changed--they-are-immutable">Python strings cannot be changed — they are <strong>immutable</strong>.</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">'J'</span>
  <span class="o">...</span>
<span class="nb">TypeError</span><span class="p">:</span> <span class="s">'str'</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignments</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="unicode-strings">Unicode Strings</h2>

<p>从 Python 2.0 开始 除了个新的 Unicode object 来存储和处理 <a href="http://www.unicode.org/">unicode</a> 数据。</p>

<p>Creating Unicode strings in Python</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="s">u'Hello World !'</span>
<span class="s">u'Hello World !'</span>

<span class="o">&gt;&gt;&gt;</span> <span class="s">u'Hello</span><span class="se">\u0020</span><span class="s">World !'</span>
<span class="s">u'Hello World !'</span>

<span class="c"># raw mode, quote with ‘ur’</span>

<span class="o">&gt;&gt;&gt;</span> <span class="s">ur'Hello</span><span class="err">\</span><span class="s">u0020World !'</span>
<span class="s">u'Hello World !'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">ur'Hello</span><span class="se">\\</span><span class="s">u0020World !'</span>
<span class="s">u'Hello</span><span class="se">\\\\</span><span class="s">u0020World !'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="编码转换">编码转换</h3>

<p>The built-in function unicode() provides access to all registered Unicode codecs (COders and DECoders)，例如Latin-1, ASCII, UTF-8, and UTF-16。 默认是 ASCII。</p>

<p>When a Unicode string is printed, written to a file, or converted with str(), conversion takes place using this default encoding.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="s">u"abc"</span>
<span class="s">u'abc'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="s">u"abc"</span><span class="p">)</span>
<span class="s">'abc'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">u"äöü"</span>
<span class="s">u'</span><span class="se">\xe4\xf6\xfc</span><span class="s">'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="s">u"äöü"</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="err">?</span>
<span class="nb">UnicodeEncodeError</span><span class="p">:</span> <span class="s">'ascii'</span> <span class="n">codec</span> <span class="n">can</span><span class="s">'t encode characters in position 0-2: ordinal not in range(128)</span><span class="err">
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>To convert a Unicode string into an 8-bit string.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="s">u"äöü"</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
<span class="s">'</span><span class="se">\xc3\xa4\xc3\xb6\xc3\xbc</span><span class="s">'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>从 utf-8 字节流生成 unicode 字符串。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">unicode</span><span class="p">(</span><span class="s">'</span><span class="se">\xc3\xa4\xc3\xb6\xc3\xbc</span><span class="s">'</span><span class="p">,</span> <span class="s">'utf-8'</span><span class="p">)</span>
<span class="s">u'</span><span class="se">\xe4\xf6\xfc</span><span class="s">'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="control-flow-语法">Control Flow 语法</h2>

<h3 id="if">if</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">"Please enter an integer: "</span><span class="p">))</span>
<span class="n">Please</span> <span class="n">enter</span> <span class="n">an</span> <span class="n">integer</span><span class="p">:</span> <span class="mi">42</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'Negative changed to zero'</span>
<span class="o">...</span> <span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'Zero'</span>
<span class="o">...</span> <span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'Single'</span>
<span class="o">...</span> <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'More'</span>
<span class="o">...</span>
<span class="n">More</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="for">for</h3>

<p>Python’s for statement iterates over the items of any sequence</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="c"># Measure some strings:</span>
<span class="o">...</span> <span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">'cat'</span><span class="p">,</span> <span class="s">'window'</span><span class="p">,</span> <span class="s">'defenestrate'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">w</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">cat</span> <span class="mi">3</span>
<span class="n">window</span> <span class="mi">6</span>
<span class="n">defenestrate</span> <span class="mi">12</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>If you need to modify the sequence you are iterating over while inside the loop (for example to duplicate selected items), it is recommended that you first make a copy.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">[:]:</span>  <span class="c"># Loop over a slice copy of the entire list.</span>
<span class="o">...</span>     <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">words</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">words</span>
<span class="p">[</span><span class="s">'defenestrate'</span><span class="p">,</span> <span class="s">'cat'</span><span class="p">,</span> <span class="s">'window'</span><span class="p">,</span> <span class="s">'defenestrate'</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="c"># the position index and corresponding value can be retrieved at the same time using the enumerate() function.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s">'tic'</span><span class="p">,</span> <span class="s">'tac'</span><span class="p">,</span> <span class="s">'toe'</span><span class="p">]):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span>
<span class="o">...</span>
<span class="mi">0</span> <span class="n">tic</span>
<span class="mi">1</span> <span class="n">tac</span>
<span class="mi">2</span> <span class="n">toe</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="c"># To loop over two or more sequences at the same time, the entries can be paired with the zip() function.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">questions</span> <span class="o">=</span> <span class="p">[</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'quest'</span><span class="p">,</span> <span class="s">'favorite color'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">answers</span> <span class="o">=</span> <span class="p">[</span><span class="s">'lancelot'</span><span class="p">,</span> <span class="s">'the holy grail'</span><span class="p">,</span> <span class="s">'blue'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">q</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">questions</span><span class="p">,</span> <span class="n">answers</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'What is your {0}?  It is {1}.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">What</span> <span class="ow">is</span> <span class="n">your</span> <span class="n">name</span><span class="err">?</span>  <span class="n">It</span> <span class="ow">is</span> <span class="n">lancelot</span><span class="o">.</span>
<span class="n">What</span> <span class="ow">is</span> <span class="n">your</span> <span class="n">quest</span><span class="err">?</span>  <span class="n">It</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">holy</span> <span class="n">grail</span><span class="o">.</span>
<span class="n">What</span> <span class="ow">is</span> <span class="n">your</span> <span class="n">favorite</span> <span class="n">color</span><span class="err">?</span>  <span class="n">It</span> <span class="ow">is</span> <span class="n">blue</span><span class="o">.</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="c"># To loop over a sequence in reverse, first specify the sequence in a forward direction and then call the reversed() function.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">i</span>
<span class="o">...</span>
<span class="mi">9</span>
<span class="mi">7</span>
<span class="mi">5</span>
<span class="mi">3</span>
<span class="mi">1</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="c"># To loop over a sequence in sorted order, use the sorted() function which returns a new sorted list while leaving the source unaltered.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">basket</span> <span class="o">=</span> <span class="p">[</span><span class="s">'apple'</span><span class="p">,</span> <span class="s">'orange'</span><span class="p">,</span> <span class="s">'apple'</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">,</span> <span class="s">'orange'</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">basket</span><span class="p">)):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">f</span>
<span class="o">...</span>
<span class="n">apple</span>
<span class="n">banana</span>
<span class="n">orange</span>
<span class="n">pear</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="c"># When looping through dictionaries, the key and corresponding value can be retrieved at the same time using the iteritems() method.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">knights</span> <span class="o">=</span> <span class="p">{</span><span class="s">'gallahad'</span><span class="p">:</span> <span class="s">'the pure'</span><span class="p">,</span> <span class="s">'robin'</span><span class="p">:</span> <span class="s">'the brave'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">knights</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span>
<span class="o">...</span>
<span class="n">gallahad</span> <span class="n">the</span> <span class="n">pure</span>
<span class="n">robin</span> <span class="n">the</span> <span class="n">brave</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="the-range-function">The range() Function</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="c"># 第三个参数表示步长，默认步长为1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">)</span>
<span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">70</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Mary'</span><span class="p">,</span> <span class="s">'had'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="s">'little'</span><span class="p">,</span> <span class="s">'lamb'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="o">...</span>
<span class="mi">0</span> <span class="n">Mary</span>
<span class="mi">1</span> <span class="n">had</span>
<span class="mi">2</span> <span class="n">a</span>
<span class="mi">3</span> <span class="n">little</span>
<span class="mi">4</span> <span class="n">lamb</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="breakelse">break、else</h3>

<p>The <code class="highlighter-rouge">break</code> statement, like in C, breaks out of the innermost enclosing for or while loop.</p>

<p><code class="highlighter-rouge">else</code> clause; it is executed when the loop terminates through exhaustion of the list (with for) or when the condition becomes false (with while), but not when the loop is terminated by a break statement.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="o">...</span>         <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="o">...</span>             <span class="k">print</span> <span class="n">n</span><span class="p">,</span> <span class="s">'equals'</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s">'*'</span><span class="p">,</span> <span class="n">n</span><span class="o">/</span><span class="n">x</span>
<span class="o">...</span>             <span class="k">break</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="c"># loop fell through without finding a factor</span>
<span class="o">...</span>         <span class="k">print</span> <span class="n">n</span><span class="p">,</span> <span class="s">'is a prime number'</span>
<span class="o">...</span>
<span class="mi">2</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">prime</span> <span class="n">number</span>
<span class="mi">3</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">prime</span> <span class="n">number</span>
<span class="mi">4</span> <span class="n">equals</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span>
<span class="mi">5</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">prime</span> <span class="n">number</span>
<span class="mi">6</span> <span class="n">equals</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span>
<span class="mi">7</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">prime</span> <span class="n">number</span>
<span class="mi">8</span> <span class="n">equals</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">4</span>
<span class="mi">9</span> <span class="n">equals</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="continue">continue</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span> <span class="s">"Found an even number"</span><span class="p">,</span> <span class="n">num</span>
<span class="o">...</span>         <span class="k">continue</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">"Found a number"</span><span class="p">,</span> <span class="n">num</span>
<span class="n">Found</span> <span class="n">an</span> <span class="n">even</span> <span class="n">number</span> <span class="mi">2</span>
<span class="n">Found</span> <span class="n">a</span> <span class="n">number</span> <span class="mi">3</span>
<span class="n">Found</span> <span class="n">an</span> <span class="n">even</span> <span class="n">number</span> <span class="mi">4</span>
<span class="n">Found</span> <span class="n">a</span> <span class="n">number</span> <span class="mi">5</span>
<span class="n">Found</span> <span class="n">an</span> <span class="n">even</span> <span class="n">number</span> <span class="mi">6</span>
<span class="n">Found</span> <span class="n">a</span> <span class="n">number</span> <span class="mi">7</span>
<span class="n">Found</span> <span class="n">an</span> <span class="n">even</span> <span class="n">number</span> <span class="mi">8</span>
<span class="n">Found</span> <span class="n">a</span> <span class="n">number</span> <span class="mi">9</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="pass">pass</h3>

<p>The pass statement does nothing. It can be used when a statement is required syntactically but the program requires no action. For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">pass</span>  <span class="c"># Busy-wait for keyboard interrupt (Ctrl+C)</span>
<span class="o">...</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="c"># This is commonly used for creating minimal classes:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">MyEmptyClass</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">pass</span>
<span class="o">...</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="条件操作符">条件操作符</h3>

<ul>
  <li>The comparison operators <code class="highlighter-rouge">in</code> and <code class="highlighter-rouge">not in</code> check whether a value occurs (does not occur) in a sequence.</li>
  <li>The operators <code class="highlighter-rouge">is</code> and <code class="highlighter-rouge">is not</code> compare whether two objects are really the same object;</li>
  <li>Comparisons may be combined using the Boolean operators <code class="highlighter-rouge">and</code> and <code class="highlighter-rouge">or</code></li>
  <li>the outcome of a comparison (or of any other Boolean expression) may be negated with <code class="highlighter-rouge">not</code>.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">string1</span><span class="p">,</span> <span class="n">string2</span><span class="p">,</span> <span class="n">string3</span> <span class="o">=</span> <span class="s">''</span><span class="p">,</span> <span class="s">'Trondheim'</span><span class="p">,</span> <span class="s">'Hammer Dance'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">non_null</span> <span class="o">=</span> <span class="n">string1</span> <span class="ow">or</span> <span class="n">string2</span> <span class="ow">or</span> <span class="n">string3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">non_null</span>
<span class="s">'Trondheim'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="list">List</h2>

<p>列表中的项可以是各种类型数据，但一般都是同一种类型。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>从 0 开始索引。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c"># indexing returns the item</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="mi">25</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>  <span class="c"># slicing returns a new list</span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>拷贝 List</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span><span class="p">[:]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="长度">长度</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">,</span> <span class="s">'d'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">letters</span><span class="p">)</span>
<span class="mi">4</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="-连接-list"><code class="highlighter-rouge">+</code> 连接 list</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">+</span> <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="list-中元素可以修改">list 中元素可以修改</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">cubes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span>  <span class="c"># something's wrong here</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cubes</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">64</span>  <span class="c"># replace the wrong value</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cubes</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="追加">追加</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">cubes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">216</span><span class="p">)</span>  <span class="c"># add the cube of 6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cubes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">7</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>  <span class="c"># and the cube of 7</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cubes</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">216</span><span class="p">,</span> <span class="mi">343</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="批量修改元素">批量修改元素</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">,</span> <span class="s">'d'</span><span class="p">,</span> <span class="s">'e'</span><span class="p">,</span> <span class="s">'f'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># replace some values</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">'C'</span><span class="p">,</span> <span class="s">'D'</span><span class="p">,</span> <span class="s">'E'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span>
<span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'C'</span><span class="p">,</span> <span class="s">'D'</span><span class="p">,</span> <span class="s">'E'</span><span class="p">,</span> <span class="s">'f'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># now remove them</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span>
<span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'f'</span><span class="p">,</span> <span class="s">'g'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># clear the list by replacing all the elements with an empty list</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span>
<span class="p">[]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="多元列表">多元列表</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="p">[[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="s">'b'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="list-comprehensions">List Comprehensions</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">squares</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">]</span>


<span class="c"># 等价于</span>
<span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>  <span class="c"># List Comprehensions</span>

<span class="c"># 等价于</span>
<span class="n">squares</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>更多例子如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">]</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># create a new list with the values doubled</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vec</span><span class="p">]</span>
<span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># filter the list to exclude negative numbers</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vec</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># apply a function to all the elements</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vec</span><span class="p">]</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># call a method on each element</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">freshfruit</span> <span class="o">=</span> <span class="p">[</span><span class="s">'  banana'</span><span class="p">,</span> <span class="s">'  loganberry '</span><span class="p">,</span> <span class="s">'passion fruit  '</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">weapon</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">weapon</span> <span class="ow">in</span> <span class="n">freshfruit</span><span class="p">]</span>
<span class="p">[</span><span class="s">'banana'</span><span class="p">,</span> <span class="s">'loganberry'</span><span class="p">,</span> <span class="s">'passion fruit'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># create a list of 2-tuples like (number, square)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># flatten a list using a listcomp with two 'for'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">vec</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">vec</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">elem</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="c"># List comprehensions can contain complex expressions and nested functions:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="p">[</span><span class="s">'3.1'</span><span class="p">,</span> <span class="s">'3.14'</span><span class="p">,</span> <span class="s">'3.142'</span><span class="p">,</span> <span class="s">'3.1416'</span><span class="p">,</span> <span class="s">'3.14159'</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="nested-list-comprehensions">Nested List Comprehensions</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span>
<span class="o">...</span>     <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="o">...</span>     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
<span class="o">...</span>     <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="o">...</span> <span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">[[</span><span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span>

<span class="c"># 等价于</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">transposed</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">transposed</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">])</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">transposed</span>
<span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">]]</span>


<span class="c"># 等价于</span>
<span class="c"># 使用python built-in function ： zip</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">matrix</span><span class="p">)</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">)]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="the-del-statement">The del statement</h3>

<p>The del statement can also be used to remove slices from a list or clear the entire list</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">66.25</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mf">1234.5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">66.25</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mi">333</span><span class="p">,</span> <span class="mf">1234.5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">66.25</span><span class="p">,</span> <span class="mf">1234.5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">a</span><span class="p">[:]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[]</span>

<span class="c"># del can also be used to delete entire variables:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">a</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="set">Set</h2>

<p>A set is an unordered collection with no duplicate elements.</p>

<ul>
  <li>Curly braces or the set() function can be used to create sets.</li>
  <li>to create an empty set you have to use set()</li>
  <li>support mathematical operations like union, intersection, difference, and symmetric difference.</li>
  <li>Basic uses include membership testing and eliminating duplicate entries.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">basket</span> <span class="o">=</span> <span class="p">[</span><span class="s">'apple'</span><span class="p">,</span> <span class="s">'orange'</span><span class="p">,</span> <span class="s">'apple'</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">,</span> <span class="s">'orange'</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fruit</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">basket</span><span class="p">)</span>               <span class="c"># create a set without duplicates</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fruit</span>
<span class="nb">set</span><span class="p">([</span><span class="s">'orange'</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">,</span> <span class="s">'apple'</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'orange'</span> <span class="ow">in</span> <span class="n">fruit</span>                 <span class="c"># fast membership testing</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'crabgrass'</span> <span class="ow">in</span> <span class="n">fruit</span>
<span class="bp">False</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="dictionaries">Dictionaries</h2>

<ul>
  <li>dictionaries are indexed by keys, which can be any immutable type;</li>
  <li>think of a dictionary as an unordered set of key: value pairs, with the requirement that the keys are unique</li>
  <li>A pair of braces creates an empty dictionary: <code class="highlighter-rouge"><span class="p">{}</span></code>.</li>
  <li>keys() method of a dictionary object returns a list of all the keys used in the dictionary, in arbitrary order (if you want it sorted, just apply the sorted() function to it).</li>
  <li>To check whether a single key is in the dictionary, use the <code class="highlighter-rouge">in</code> keyword.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span> <span class="o">=</span> <span class="p">{</span><span class="s">'jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">,</span> <span class="s">'sape'</span><span class="p">:</span> <span class="mi">4139</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span><span class="p">[</span><span class="s">'guido'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4127</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span>
<span class="p">{</span><span class="s">'sape'</span><span class="p">:</span> <span class="mi">4139</span><span class="p">,</span> <span class="s">'guido'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">,</span> <span class="s">'jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span><span class="p">[</span><span class="s">'jack'</span><span class="p">]</span>
<span class="mi">4098</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">tel</span><span class="p">[</span><span class="s">'sape'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span><span class="p">[</span><span class="s">'irv'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4127</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span>
<span class="p">{</span><span class="s">'guido'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">,</span> <span class="s">'irv'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">,</span> <span class="s">'jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tel</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="p">[</span><span class="s">'guido'</span><span class="p">,</span> <span class="s">'irv'</span><span class="p">,</span> <span class="s">'jack'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'guido'</span> <span class="ow">in</span> <span class="n">tel</span>
<span class="bp">True</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="dict-constructor">dict() constructor</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="c"># directly from sequences of key-value pairs:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dict</span><span class="p">([(</span><span class="s">'sape'</span><span class="p">,</span> <span class="mi">4139</span><span class="p">),</span> <span class="p">(</span><span class="s">'guido'</span><span class="p">,</span> <span class="mi">4127</span><span class="p">),</span> <span class="p">(</span><span class="s">'jack'</span><span class="p">,</span> <span class="mi">4098</span><span class="p">)])</span>
<span class="p">{</span><span class="s">'sape'</span><span class="p">:</span> <span class="mi">4139</span><span class="p">,</span> <span class="s">'jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">,</span> <span class="s">'guido'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">}</span>

<span class="c"># specify pairs using keyword arguments</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sape</span><span class="o">=</span><span class="mi">4139</span><span class="p">,</span> <span class="n">guido</span><span class="o">=</span><span class="mi">4127</span><span class="p">,</span> <span class="n">jack</span><span class="o">=</span><span class="mi">4098</span><span class="p">)</span>
<span class="p">{</span><span class="s">'sape'</span><span class="p">:</span> <span class="mi">4139</span><span class="p">,</span> <span class="s">'jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">,</span> <span class="s">'guido'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="dict-comprehensions">dict comprehensions</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)}</span>
<span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">36</span><span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="functions">Functions</h2>

<h3 id="函数定义">函数定义</h3>

<p>The first statement of the function body can optionally be a string literal; this string literal is the function’s documentation string, or docstring.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>    <span class="c"># write Fibonacci series up to n</span>
<span class="o">...</span>     <span class="s">"""Print a Fibonacci series up to n."""</span>
<span class="o">...</span>     <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="o">...</span>     <span class="k">while</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span> <span class="n">a</span><span class="p">,</span>
<span class="o">...</span>         <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># Now call the function we just defined:</span>
<span class="o">...</span> <span class="n">fib</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span> <span class="mi">610</span> <span class="mi">987</span> <span class="mi">1597</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="函数说明文档">函数说明文档</h4>

<p>Here is an example of a multi-line docstring:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
<span class="o">...</span>     <span class="s">"""Do nothing, but document it.
...
...     No, really, it doesn't do anything.
...     """</span>
<span class="o">...</span>     <span class="k">pass</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">my_function</span><span class="o">.</span><span class="n">__doc__</span>
<span class="n">Do</span> <span class="n">nothing</span><span class="p">,</span> <span class="n">but</span> <span class="n">document</span> <span class="n">it</span><span class="o">.</span>

    <span class="n">No</span><span class="p">,</span> <span class="n">really</span><span class="p">,</span> <span class="n">it</span> <span class="n">doesn</span><span class="s">'t do anything.</span><span class="err">

</span></pre></td></tr></tbody></table>
</div>
</div>

<h3 id="参数">参数</h3>

<p>在函数体中，默认使用参数的引用。</p>

<h3 id="参数缺省值">参数缺省值</h3>

<p>Python 支持默认参数值，在定义函数时指定，之后不可更改。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">ask_ok</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">complaint</span><span class="o">=</span><span class="s">'Yes or no, please!'</span><span class="p">):</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ok</span> <span class="ow">in</span> <span class="p">(</span><span class="s">'y'</span><span class="p">,</span> <span class="s">'ye'</span><span class="p">,</span> <span class="s">'yes'</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">ok</span> <span class="ow">in</span> <span class="p">(</span><span class="s">'n'</span><span class="p">,</span> <span class="s">'no'</span><span class="p">,</span> <span class="s">'nop'</span><span class="p">,</span> <span class="s">'nope'</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">retries</span> <span class="o">=</span> <span class="n">retries</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">IOError</span><span class="p">(</span><span class="s">'refusenik user'</span><span class="p">)</span>
        <span class="k">print</span> <span class="n">complaint</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>This function can be called in several ways:</p>

<ul>
  <li>giving only the mandatory argument: ask_ok(‘Do you really want to quit?’)</li>
  <li>giving one of the optional arguments: ask_ok(‘OK to overwrite the file?’, 2)</li>
  <li>or even giving all arguments: ask_ok(‘OK to overwrite the file?’, 2, ‘Come on, only yes or no!’)</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">i</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">arg</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">f</span><span class="p">()</span>         <span class="c"># will print 5. The default value is evaluated only once. </span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="c"># This makes a difference when the default is a mutable object such as a list, dictionary, or instances of most classes.</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span>

<span class="k">print</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span> <span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span> <span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

</pre></td></tr></tbody></table>
</div>
</div>

<p>This will print</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>[1]
[1, 2]
[1, 2, 3]
</pre></td></tr></tbody></table>
</div>
</div>

<p>If you don’t want the default to be shared between subsequent calls, you can write the function like this instead:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">L</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="使用-参数名keyword-arguments-调用函数">使用 参数名（Keyword Arguments） 调用函数</h3>

<ul>
  <li>参数表类似 hash table。</li>
  <li>使用参数名调用函数时，基于位置的参数传入要放在前面。</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s">'a stiff'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">'voom'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">'Norwegian Blue'</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">"-- This parrot wouldn't"</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span>
    <span class="k">print</span> <span class="s">"if you put"</span><span class="p">,</span> <span class="n">voltage</span><span class="p">,</span> <span class="s">"volts through it."</span>
    <span class="k">print</span> <span class="s">"-- Lovely plumage, the"</span><span class="p">,</span> <span class="nb">type</span>
    <span class="k">print</span> <span class="s">"-- It's"</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="s">"!"</span>

<span class="n">parrot</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>                                          <span class="c"># 1 positional argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>                                  <span class="c"># 1 keyword argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o">=</span><span class="mi">1000000</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">'VOOOOOM'</span><span class="p">)</span>             <span class="c"># 2 keyword arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s">'VOOOOOM'</span><span class="p">,</span> <span class="n">voltage</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>             <span class="c"># 2 keyword arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="s">'a million'</span><span class="p">,</span> <span class="s">'bereft of life'</span><span class="p">,</span> <span class="s">'jump'</span><span class="p">)</span>         <span class="c"># 3 positional arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="s">'a thousand'</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s">'pushing up the daisies'</span><span class="p">)</span>  <span class="c"># 1 positional, 1 keyword</span>


</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="name-收拢基于位置的参数name-基于名字的参数"><code class="highlighter-rouge">*name</code> 收拢基于位置的参数，<code class="highlighter-rouge">**name</code> 基于名字的参数</h3>

<ul>
  <li><code class="highlighter-rouge">*name</code> must occur before <code class="highlighter-rouge">**name</code></li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">cheeseshop</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="o">*</span><span class="n">arguments</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">"-- Do you have any"</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="s">"?"</span>
    <span class="k">print</span> <span class="s">"-- I'm sorry, we're all out of"</span><span class="p">,</span> <span class="n">kind</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">arg</span>
    <span class="k">print</span> <span class="s">"-"</span> <span class="o">*</span> <span class="mi">40</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keywords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">kw</span><span class="p">,</span> <span class="s">":"</span><span class="p">,</span> <span class="n">keywords</span><span class="p">[</span><span class="n">kw</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>It could be called like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="n">cheeseshop</span><span class="p">(</span><span class="s">"Limburger"</span><span class="p">,</span> <span class="s">"It's very runny, sir."</span><span class="p">,</span>
           <span class="s">"It's really very, VERY runny, sir."</span><span class="p">,</span>
           <span class="n">shopkeeper</span><span class="o">=</span><span class="s">'Michael Palin'</span><span class="p">,</span>
           <span class="n">client</span><span class="o">=</span><span class="s">"John Cleese"</span><span class="p">,</span>
           <span class="n">sketch</span><span class="o">=</span><span class="s">"Cheese Shop Sketch"</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>it would print:</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre>-- Do you have any Limburger ?
-- I'm sorry, we're all out of Limburger
It's very runny, sir.
It's really very, VERY runny, sir.
----------------------------------------
client : John Cleese
shopkeeper : Michael Palin
sketch : Cheese Shop Sketch
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="以-list-或-dict-方式传参--unpacking-argument-lists">以 list 或 <a href="https://docs.python.org/2/library/stdtypes.html#typesmapping">dict</a> 方式传参 ， Unpacking Argument Lists</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="c"># write the function call with the *-operator to unpack the arguments out of a list or tuple:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>             <span class="c"># normal call with separate arguments</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>            <span class="c"># call with arguments unpacked from a list</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="c"># 同样，dictionaries can deliver keyword arguments with the **-operator</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s">'a stiff'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">'voom'</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">"-- This parrot wouldn't"</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">"if you put"</span><span class="p">,</span> <span class="n">voltage</span><span class="p">,</span> <span class="s">"volts through it."</span><span class="p">,</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">"E's"</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="s">"!"</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">"voltage"</span><span class="p">:</span> <span class="s">"four million"</span><span class="p">,</span> <span class="s">"state"</span><span class="p">:</span> <span class="s">"bleedin' demised"</span><span class="p">,</span> <span class="s">"action"</span><span class="p">:</span> <span class="s">"VOOM"</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">parrot</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
<span class="o">--</span> <span class="n">This</span> <span class="n">parrot</span> <span class="n">wouldn</span><span class="s">'t VOOM if you put four million volts through it. E'</span><span class="n">s</span> <span class="n">bleedin</span><span class="s">' demised !</span><span class="err">
</span></pre></td></tr></tbody></table>
</div>
</div>

<h3 id="lambda-expressions">Lambda Expressions</h3>

<ul>
  <li>Small anonymous functions can be created with the lambda keyword.</li>
  <li>Lambda functions can be used wherever function objects are required.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">make_incrementor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">make_incrementor</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="mi">42</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">43</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Another use is to pass a small function as an argument:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s">'one'</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">'two'</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">'three'</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">'four'</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span>
<span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="s">'four'</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">'one'</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">'three'</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">'two'</span><span class="p">)]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="作用域全局变量访问">作用域、全局变量访问</h3>

<h3 id="引用函数函数变量">引用函数、函数变量</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">fib</span> <span class="n">at</span> <span class="mi">10042</span><span class="n">ed0</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">fib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="返回值">返回值</h3>

<p>没有 return 的函数，默认返回 ‘None’ （built-in name）</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="bp">None</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="built-in-functions">built-in functions</h2>

<h3 id="filterfunction-sequence">filter(function, sequence)</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">24</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="mapfunction-sequence">map(function, sequence)</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">map</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">216</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">729</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>More than one sequence may be passed;</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">seq</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">map</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">seq</span><span class="p">)</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="reducefunction-sequence">reduce(function, sequence)</h3>

<ul>
  <li>returns a single value constructed by calling the binary function function on the first two items of the sequence, then on the result and the next item, and so on.</li>
  <li>If there’s only one item in the sequence</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span> <span class="c"># 1+2+3+4+5+6+7+8+9+10 = 55</span>
<span class="mi">55</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ul>
  <li>its value is returned; if the sequence is empty, an exception is raised.
    <ul>
      <li>A third argument can be passed to indicate the starting value.
        <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">seq</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span> <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="o">...</span>     <span class="k">return</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="mi">55</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sum</span><span class="p">([])</span>
<span class="mi">0</span>
</pre></td></tr></tbody></table>
</div>
        </div>
      </li>
    </ul>
  </li>
</ul>

<h2 id="module">Module</h2>

<ul>
  <li>A module is a file containing Python definitions and statements.</li>
  <li>The file name is the module name with the suffix .py appended.</li>
  <li>Within a module, the module’s name (as a string) is available as the value of the global variable <strong>name</strong>.</li>
</ul>

<h3 id="简单例子--import-some-module">简单例子 / import some-module</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="c"># fibo.py</span>
<span class="c"># Fibonacci numbers module</span>

<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>    <span class="c"># write Fibonacci series up to n</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">b</span><span class="p">,</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>

<span class="k">def</span> <span class="nf">fib2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>   <span class="c"># return Fibonacci series up to n</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">fibo</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fibo</span><span class="o">.</span><span class="n">fib</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span> <span class="mi">610</span> <span class="mi">987</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fibo</span><span class="o">.</span><span class="n">fib2</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fibo</span><span class="o">.</span><span class="n">__name__</span>
<span class="s">'fibo'</span>

<span class="c"># If you intend to use a function often you can assign it to a local name:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span> <span class="o">=</span> <span class="n">fibo</span><span class="o">.</span><span class="n">fib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="import-some-module-as-the-alias">import some-module as the-alias</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">fibo</span> <span class="kn">as</span> <span class="nn">fib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="o">.</span><span class="n">fib</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="from-some-module-import-functions">from some-module import functions</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="c">#  in the example, fibo is not defined</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">fibo</span> <span class="kn">import</span> <span class="n">fib</span><span class="p">,</span> <span class="n">fib2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span>

<span class="c"># import all names that a module defines:</span>
<span class="c"># imports all names except those beginning with an underscore (_).</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">fibo</span> <span class="kn">import</span> <span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">fibo</span> <span class="kn">import</span> <span class="n">fib</span> <span class="k">as</span> <span class="n">fibonacci</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fibonacci</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="__name__"><code class="highlighter-rouge">__name__</code></h3>

<ul>
  <li><code class="highlighter-rouge">import the-module-name</code> 方式引入时， <code class="highlighter-rouge">__name__</code> = the-module-name</li>
  <li><code class="highlighter-rouge">python the-module-name.py &lt;arguments&gt;</code> 作为脚本执行时， <code class="highlighter-rouge">__name__ == "__main__"</code>
    <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># If the module is imported, the code is not run</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
  <span class="kn">import</span> <span class="nn">sys</span>
  <span class="n">fib</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="gp">$ </span>python fibo.py 50
1 1 2 3 5 8 13 21 34
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="the-module-search-path">The Module Search Path</h3>

<ul>
  <li><code class="highlighter-rouge">import spam</code> 的搜索过程：</li>
</ul>

<ol>
  <li>first searches for a built-in module with that name.</li>
  <li>如果没有，在 <code class="highlighter-rouge">sys.path</code> 下搜索 spam.py 文件。<br />
<code class="highlighter-rouge">sys.path</code> is initialized from these locations:
    <ul>
      <li>the directory containing the input script (or the current directory).</li>
      <li><code class="highlighter-rouge">PYTHONPATH</code> (a list of directory names, with the same syntax as the shell variable PATH).</li>
      <li>the installation-dependent default.<br />
 程序初始化后，<code class="highlighter-rouge">sys.path</code> 还是可以改的。</li>
    </ul>
  </li>
</ol>

<h2 id="packages">Packages</h2>

<p>For example, the module name A.B designates a submodule named B in a package named A.</p>

<ul>
  <li>类似java中的package、DotNet的命名空间，python中用来组织 module，避免名字冲突。</li>
  <li>
    <p>When importing the package, Python searches through the directories on sys.path looking for the package subdirectory.</p>
  </li>
  <li>例子：sound 包的目录结构
    <div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre>sound/                          Top-level package
    __init__.py               Initialize the sound package
    formats/                  Subpackage for file format conversions
        __init__.py
        wavread.py
        wavwrite.py
        aiffread.py
        aiffwrite.py
        auread.py
        auwrite.py
        ...
    effects/                  Subpackage for sound effects
        __init__.py
        echo.py
        surround.py
        reverse.py
        ...
    filters/                  Subpackage for filters
        __init__.py
        equalizer.py
        vocoder.py
        karaoke.py
        ...
</pre></td></tr></tbody></table>
</div>
    </div>

    <ul>
      <li>引用方法
        <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="kn">import</span> <span class="nn">sound.effects.echo</span>
    
<span class="c"># or</span>
<span class="n">sound</span><span class="o">.</span><span class="n">effects</span><span class="o">.</span><span class="n">echo</span><span class="o">.</span><span class="n">echofilter</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">atten</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    
<span class="c"># or</span>
<span class="kn">from</span> <span class="nn">sound.effects</span> <span class="kn">import</span> <span class="n">echo</span>
</pre></td></tr></tbody></table>
</div>
        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="importing--from-a-package">Importing * From a Package</h3>

<ul>
  <li>python 不支持自动从包中搜索所有module并导入，这样很费时；要求包的作者，在 <code class="highlighter-rouge">__init__.py</code> 中定义 <code class="highlighter-rouge">__all__</code> 来说明 <code class="highlighter-rouge">from package import *</code> 需要导入那些name。</li>
</ul>

<p>For example, the file sound/effects/<strong>init</strong>.py could contain the following code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">"echo"</span><span class="p">,</span> <span class="s">"surround"</span><span class="p">,</span> <span class="s">"reverse"</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ul>
  <li>If <code class="highlighter-rouge">__all__</code> is not defined, the statement <code class="highlighter-rouge">from sound.effects import *</code> <strong>does not</strong> import all submodules from the package sound.effects into the current namespace; it only ensures that the package sound.effects has been imported (possibly running any initialization code in <strong>init</strong>.py) and then imports whatever names are defined in the package. This includes any names defined (and submodules explicitly loaded) by <strong>init</strong>.py.</li>
</ul>

<h2 id="debug">DEBUG</h2>

<h3 id="dir">dir()</h3>

<p>The built-in function dir() is used to find out which names a module defines.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">fibo</span><span class="o">,</span> <span class="nn">sys</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dir</span><span class="p">(</span><span class="n">fibo</span><span class="p">)</span>
<span class="p">[</span><span class="s">'__name__'</span><span class="p">,</span> <span class="s">'fib'</span><span class="p">,</span> <span class="s">'fib2'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dir</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>  
<span class="p">[</span><span class="s">'__displayhook__'</span><span class="p">,</span> <span class="s">'__doc__'</span><span class="p">,</span> <span class="s">'__excepthook__'</span><span class="p">,</span> <span class="s">'__name__'</span><span class="p">,</span> <span class="s">'__package__'</span><span class="p">,</span>
 <span class="s">'__stderr__'</span><span class="p">,</span> <span class="s">'__stdin__'</span><span class="p">,</span> <span class="s">'__stdout__'</span><span class="p">,</span> <span class="s">'_clear_type_cache'</span><span class="p">,</span>
 <span class="s">'_current_frames'</span><span class="p">,</span> <span class="s">'_getframe'</span><span class="p">,</span> <span class="s">'_mercurial'</span><span class="p">,</span> <span class="s">'api_version'</span><span class="p">,</span> <span class="s">'argv'</span><span class="p">,</span>
 <span class="s">'builtin_module_names'</span><span class="p">,</span> <span class="s">'byteorder'</span><span class="p">,</span> <span class="s">'call_tracing'</span><span class="p">,</span> <span class="s">'callstats'</span><span class="p">,</span>
 <span class="s">'copyright'</span><span class="p">,</span> <span class="s">'displayhook'</span><span class="p">,</span> <span class="s">'dont_write_bytecode'</span><span class="p">,</span> <span class="s">'exc_clear'</span><span class="p">,</span> <span class="s">'exc_info'</span><span class="p">,</span>
 <span class="s">'exc_traceback'</span><span class="p">,</span> <span class="s">'exc_type'</span><span class="p">,</span> <span class="s">'exc_value'</span><span class="p">,</span> <span class="s">'excepthook'</span><span class="p">,</span> <span class="s">'exec_prefix'</span><span class="p">,</span>
 <span class="s">'executable'</span><span class="p">,</span> <span class="s">'exit'</span><span class="p">,</span> <span class="s">'flags'</span><span class="p">,</span> <span class="s">'float_info'</span><span class="p">,</span> <span class="s">'float_repr_style'</span><span class="p">,</span>
 <span class="s">'getcheckinterval'</span><span class="p">,</span> <span class="s">'getdefaultencoding'</span><span class="p">,</span> <span class="s">'getdlopenflags'</span><span class="p">,</span>
 <span class="s">'getfilesystemencoding'</span><span class="p">,</span> <span class="s">'getobjects'</span><span class="p">,</span> <span class="s">'getprofile'</span><span class="p">,</span> <span class="s">'getrecursionlimit'</span><span class="p">,</span>
 <span class="s">'getrefcount'</span><span class="p">,</span> <span class="s">'getsizeof'</span><span class="p">,</span> <span class="s">'gettotalrefcount'</span><span class="p">,</span> <span class="s">'gettrace'</span><span class="p">,</span> <span class="s">'hexversion'</span><span class="p">,</span>
 <span class="s">'long_info'</span><span class="p">,</span> <span class="s">'maxint'</span><span class="p">,</span> <span class="s">'maxsize'</span><span class="p">,</span> <span class="s">'maxunicode'</span><span class="p">,</span> <span class="s">'meta_path'</span><span class="p">,</span> <span class="s">'modules'</span><span class="p">,</span>
 <span class="s">'path'</span><span class="p">,</span> <span class="s">'path_hooks'</span><span class="p">,</span> <span class="s">'path_importer_cache'</span><span class="p">,</span> <span class="s">'platform'</span><span class="p">,</span> <span class="s">'prefix'</span><span class="p">,</span> <span class="s">'ps1'</span><span class="p">,</span>
 <span class="s">'py3kwarning'</span><span class="p">,</span> <span class="s">'setcheckinterval'</span><span class="p">,</span> <span class="s">'setdlopenflags'</span><span class="p">,</span> <span class="s">'setprofile'</span><span class="p">,</span>
 <span class="s">'setrecursionlimit'</span><span class="p">,</span> <span class="s">'settrace'</span><span class="p">,</span> <span class="s">'stderr'</span><span class="p">,</span> <span class="s">'stdin'</span><span class="p">,</span> <span class="s">'stdout'</span><span class="p">,</span> <span class="s">'subversion'</span><span class="p">,</span>
 <span class="s">'version'</span><span class="p">,</span> <span class="s">'version_info'</span><span class="p">,</span> <span class="s">'warnoptions'</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="打印-print-format">打印 print, format</h3>

<ul>
  <li>print
    <ul>
      <li>by default it adds spaces between its arguments.</li>
    </ul>
  </li>
  <li>format</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<span class="o">...</span>     <span class="c"># Note trailing comma on previous line</span>
<span class="o">...</span>     <span class="k">print</span> <span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'{0:2d} {1:3d} {2:4d}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
<span class="o">...</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="padding-space--zero">padding space / zero</h4>

<ul>
  <li><a href="https://docs.python.org/2/library/stdtypes.html#str.rjust">str.rjust</a>、<a href="https://docs.python.org/2/library/stdtypes.html#str.ljust">str.ljust</a>、<a href="https://docs.python.org/2/library/stdtypes.html#str.center">str.center</a>
    <ul>
      <li>the <code class="highlighter-rouge">str.rjust()</code> method of string objects, which right-justifies a string in a field of a given width by padding it with spaces on the left.</li>
    </ul>
  </li>
  <li><a href="https://docs.python.org/2/library/stdtypes.html#str.zfill">str.zfill</a>
    <ul>
      <li>str.zfill(), which pads a numeric string on the left with zeros.</li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'['</span> <span class="o">+</span> <span class="s">'3'</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">']'</span>
<span class="p">[</span><span class="mi">3</span>    <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'['</span> <span class="o">+</span> <span class="s">'3'</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">']'</span>
<span class="p">[</span>    <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'['</span> <span class="o">+</span> <span class="s">'3'</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="s">']'</span>
<span class="p">[</span>  <span class="mi">3</span>  <span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="s">'12'</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="s">'00012'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'-3.14'</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="s">'-003.14'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'3.14159265359'</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="s">'3.14159265359'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="strformat"><a href="https://docs.python.org/2/library/stdtypes.html#str.format">str.format()</a></h4>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'We are the {} who say "{}!"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'knights'</span><span class="p">,</span> <span class="s">'Ni'</span><span class="p">)</span>
<span class="n">We</span> <span class="n">are</span> <span class="n">the</span> <span class="n">knights</span> <span class="n">who</span> <span class="n">say</span> <span class="s">"Ni!"</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'{0} and {1}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'spam'</span><span class="p">,</span> <span class="s">'eggs'</span><span class="p">)</span>
<span class="n">spam</span> <span class="ow">and</span> <span class="n">eggs</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'{1} and {0}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'spam'</span><span class="p">,</span> <span class="s">'eggs'</span><span class="p">)</span>
<span class="n">eggs</span> <span class="ow">and</span> <span class="n">spam</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'This {food} is {adjective}.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="o">...</span>       <span class="n">food</span><span class="o">=</span><span class="s">'spam'</span><span class="p">,</span> <span class="n">adjective</span><span class="o">=</span><span class="s">'absolutely horrible'</span><span class="p">)</span>
<span class="n">This</span> <span class="n">spam</span> <span class="ow">is</span> <span class="n">absolutely</span> <span class="n">horrible</span><span class="o">.</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>‘!s’ (apply str()) and ‘!r’ (apply repr()) can be used to convert the value before it is formatted.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">math</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'The value of PI is approximately {}.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">PI</span> <span class="ow">is</span> <span class="n">approximately</span> <span class="mf">3.14159265359</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'The value of PI is approximately {!r}.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">PI</span> <span class="ow">is</span> <span class="n">approximately</span> <span class="mf">3.141592653589793</span><span class="o">.</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>An optional ‘:’ and format specifier can follow the field name.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">math</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'The value of PI is approximately {0:.3f}.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">PI</span> <span class="ow">is</span> <span class="n">approximately</span> <span class="mf">3.142</span><span class="o">.</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Passing an integer after the ‘:’ will cause that field to be a minimum number of characters wide. This is useful for making tables pretty.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Sjoerd'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">,</span> <span class="s">'Jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">,</span> <span class="s">'Dcab'</span><span class="p">:</span> <span class="mi">7678</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'{0:10} ==&gt; {1:10d}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">phone</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">Jack</span>       <span class="o">==&gt;</span>       <span class="mi">4098</span>
<span class="n">Dcab</span>       <span class="o">==&gt;</span>       <span class="mi">7678</span>
<span class="n">Sjoerd</span>     <span class="o">==&gt;</span>       <span class="mi">4127</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>simply passing the dict and using square brackets ‘[]’ to access the keys</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Sjoerd'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">,</span> <span class="s">'Jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">,</span> <span class="s">'Dcab'</span><span class="p">:</span> <span class="mi">8637678</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="p">(</span><span class="s">'Jack: {0[Jack]:d}; Sjoerd: {0[Sjoerd]:d}; '</span>
<span class="o">...</span>        <span class="s">'Dcab: {0[Dcab]:d}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">table</span><span class="p">))</span>
<span class="n">Jack</span><span class="p">:</span> <span class="mi">4098</span><span class="p">;</span> <span class="n">Sjoerd</span><span class="p">:</span> <span class="mi">4127</span><span class="p">;</span> <span class="n">Dcab</span><span class="p">:</span> <span class="mi">8637678</span>

<span class="c"># This could also be done by passing the table as keyword arguments with the ‘**’ notation.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Sjoerd'</span><span class="p">:</span> <span class="mi">4127</span><span class="p">,</span> <span class="s">'Jack'</span><span class="p">:</span> <span class="mi">4098</span><span class="p">,</span> <span class="s">'Dcab'</span><span class="p">:</span> <span class="mi">8637678</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="s">'Jack: {Jack:d}; Sjoerd: {Sjoerd:d}; Dcab: {Dcab:d}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">table</span><span class="p">)</span>
<span class="n">Jack</span><span class="p">:</span> <span class="mi">4098</span><span class="p">;</span> <span class="n">Sjoerd</span><span class="p">:</span> <span class="mi">4127</span><span class="p">;</span> <span class="n">Dcab</span><span class="p">:</span> <span class="mi">8637678</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="vars-which-returns-a-dictionary-containing-all-local-variables">vars(), which returns a dictionary containing all local variables.</h4>

<p><a href="https://docs.python.org/2/library/functions.html#vars">vars()</a>, which returns a dictionary containing all local variables.</p>

<h4 id="字符编码字符实际值">字符编码、字符实际值</h4>

<ul>
  <li><a href="https://docs.python.org/2/library/functions.html#ord">ord()</a> would get the int value of the char.</li>
  <li>chr() 反过来，将数值转换为字符。</li>
  <li>unichr()</li>
  <li>hex(数值) 将数值转换为十六进制字符串：0xXX</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">ord</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span>
<span class="mi">97</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">97</span><span class="p">)</span>
<span class="s">'a'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span>
<span class="s">'d'</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="reading-and-writing-files">Reading and Writing Files</h2>

<h3 id="open">open()</h3>

<p><a href="https://docs.python.org/2/library/functions.html#open">open()</a> returns a file object, and is most commonly used with two arguments: <code class="highlighter-rouge">open(filename, mode)</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'workfile'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">f</span>
<span class="o">&lt;</span><span class="nb">open</span> <span class="nb">file</span> <span class="s">'workfile'</span><span class="p">,</span> <span class="n">mode</span> <span class="s">'w'</span> <span class="n">at</span> <span class="mi">80</span><span class="n">a0960</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="mode">mode</h4>

<p>缺省mode为 ‘r’</p>

<ul>
  <li>‘r’ when the file will only be read</li>
  <li>‘w’ for only writing (an existing file with the same name will be erased)</li>
  <li>‘a’ opens the file for appending;</li>
  <li>‘r+’ opens the file for both reading and writing.</li>
  <li>‘b’ appended to the mode opens the file in binary mode, so there are also modes like ‘rb’, ‘wb’, and ‘r+b’. ‘b’ 在 Windows 上有效，为兼容Windows，如果遇到二进制文件，都加上 ‘b’。</li>
</ul>

<h3 id="close">close()</h3>

<p>When you’re done with a file, call <code class="highlighter-rouge">f.close()</code> to close it and free up any system resources taken up by the open file. After calling <code class="highlighter-rouge">f.close()</code>, attempts to use the file object will automatically fail.</p>

<h4 id="with-keyword">with keyword</h4>

<p>It is good practice to use the <a href="https://docs.python.org/2/reference/compound_stmts.html#with">with keyword</a> when dealing with file objects.</p>

<p>This has the advantage that the file is properly closed after its suite finishes, even if an exception is raised on the way.</p>

<p>等价于 try-finally blocks，但是更简洁。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'workfile'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">read_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">closed</span>
<span class="bp">True</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="readsize">read(size)</h3>

<p>To read a file’s contents, call f.read(size), which reads some quantity of data and returns it as a string. size is an optional numeric argument. When size is omitted or negative, the entire contents of the file will be read and returned; it’s your problem if the file is twice as large as your machine’s memory. Otherwise, at most size bytes are read and returned. If the end of the file has been reached, f.read() will return an empty string (“”).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="s">'This is the entire file.</span><span class="se">\n</span><span class="s">'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="s">''</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="freadline">f.readline()</h3>

<p>f.readline() reads a single line from the file; a newline character (<code class="highlighter-rouge">\n</code>) is left at the end of the string, and is only omitted on the last line of the file if the file doesn’t end in a newline. This makes the return value unambiguous; if f.readline() returns an empty string, the end of the file has been reached, while a blank line is represented by ‘<code class="highlighter-rouge">\n</code>’, a string containing only a single newline.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="s">'This is the first line of the file.</span><span class="se">\n</span><span class="s">'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="s">'Second line of the file</span><span class="se">\n</span><span class="s">'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<span class="s">''</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="for-loop-over-the-file-object">for-loop over the file object</h3>

<p>For reading lines from a file, you can loop over the file object. This is memory efficient, fast, and leads to simple code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">line</span><span class="p">,</span>

<span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">first</span> <span class="n">line</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">file</span><span class="o">.</span>
<span class="n">Second</span> <span class="n">line</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">file</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="writestring">write(string)</h3>

<p><code class="highlighter-rouge">f.write(string)</code> writes the contents of string to the file, returning None.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'This is a test</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="n">To</span> <span class="n">write</span> <span class="n">something</span> <span class="n">other</span> <span class="n">than</span> <span class="n">a</span> <span class="n">string</span><span class="p">,</span> <span class="n">it</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">converted</span> <span class="n">to</span> <span class="n">a</span> <span class="n">string</span> <span class="n">first</span><span class="p">:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="s">'the answer'</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="文件指针位置">文件指针位置</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">f.tell()</code> returns an integer giving the file object’s current position in the file, measured in bytes from the beginning of the file.</p>
  </li>
  <li>
    <p>To change the file object’s position, use <code class="highlighter-rouge">f.seek(offset, from_what)</code>.</p>
    <ul>
      <li><code class="highlighter-rouge">from_what</code> value of
        <ul>
          <li>缺省为 0 measures from the beginning of the file</li>
          <li>1 uses the current file position</li>
          <li>2 uses the end of the file as the reference point.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'workfile'</span><span class="p">,</span> <span class="s">'r+'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'0123456789abcdef'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <span class="c"># Go to the 6th byte in the file</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="s">'5'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c"># Go to the 3rd byte before the end</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="s">'d'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="json-module">json module</h2>

<p>The standard module called <a href="https://docs.python.org/2/library/json.html#module-json">json</a> can take Python data hierarchies, and convert them to string representations; this process is called <strong>serializing</strong>.</p>

<p>Reconstructing the data from the string representation is called <strong>deserializing</strong>.</p>

<p><a href="https://docs.python.org/2/library/json.html#json.dumps">json.dumps()</a> : object -&gt; json string</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="c"># object -&gt; json string</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">json</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="s">'simple'</span><span class="p">,</span> <span class="s">'list'</span><span class="p">])</span>
<span class="s">'[1, "simple", "list"]'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="save--load-json-object">save / load json object</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="c"># This simple serialization technique can handle lists and dictionaries, but serializing arbitrary class instances in JSON requires a bit of extra effort. </span>

<span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

<span class="c"># To decode the object again</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="errors-and-exceptions">Errors and Exceptions</h2>

<p>There are (at least) two distinguishable kinds of errors: <strong>syntax errors</strong> and <strong>exceptions</strong>.</p>

<ul>
  <li>
    <p><strong>syntax errors</strong> 顾名思义，代码写错了。根据提示修改就好。</p>
  </li>
  <li>
    <p>Exceptions</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="mi">10</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">ZeroDivisionError</span><span class="p">:</span> <span class="n">integer</span> <span class="n">division</span> <span class="ow">or</span> <span class="n">modulo</span> <span class="n">by</span> <span class="n">zero</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">spam</span><span class="o">*</span><span class="mi">3</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s">'spam'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'2'</span> <span class="o">+</span> <span class="mi">2</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">TypeError</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">concatenate</span> <span class="s">'str'</span> <span class="ow">and</span> <span class="s">'int'</span> <span class="n">objects</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ul>

<p>自带的Exception参见： <a href="https://docs.python.org/2/library/exceptions.html#bltin-exceptions">Built-in Exceptions</a></p>

<h3 id="handle-exeception-tryexcept">handle exeception, try…except…</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">"Please enter a number: "</span><span class="p">))</span>
<span class="o">...</span>         <span class="k">break</span>
<span class="o">...</span>     <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span> <span class="s">"Oops!  That was no valid number.  Try again..."</span>
<span class="o">...</span>     <span class="k">except</span> <span class="p">(</span><span class="nb">RuntimeError</span><span class="p">,</span> <span class="nb">TypeError</span><span class="p">,</span> <span class="nb">NameError</span><span class="p">):</span>
<span class="o">...</span>         <span class="k">pass</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="引用exception">引用exception</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

<span class="c"># or</span>

<span class="k">except</span> <span class="nb">ValueError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">'spam'</span><span class="p">,</span> <span class="s">'eggs'</span><span class="p">)</span>
<span class="o">...</span> <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">inst</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>     <span class="c"># the exception instance</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">inst</span><span class="o">.</span><span class="n">args</span>      <span class="c"># arguments stored in .args</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">inst</span>           <span class="c"># __str__ allows args to be printed directly</span>
<span class="o">...</span>     <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">args</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'x ='</span><span class="p">,</span> <span class="n">x</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'y ='</span><span class="p">,</span> <span class="n">y</span>
<span class="o">...</span>
<span class="o">&lt;</span><span class="nb">type</span> <span class="s">'exceptions.Exception'</span><span class="o">&gt;</span>
<span class="p">(</span><span class="s">'spam'</span><span class="p">,</span> <span class="s">'eggs'</span><span class="p">)</span>
<span class="p">(</span><span class="s">'spam'</span><span class="p">,</span> <span class="s">'eggs'</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">spam</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">eggs</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="raise-关键字-重新抛出exception">raise 关键字： 重新抛出exception</h4>

<p>The <a href="https://docs.python.org/2/reference/simple_stmts.html#raise">raise</a> statement allows the programmer to force a specified exception to occur.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'myfile.txt'</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="k">except</span> <span class="nb">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"I/O error({0}): {1}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">errno</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">strerror</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Could not convert data to an integer."</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Unexpected error:"</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">raise</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">raise</span> <span class="nb">NameError</span><span class="p">(</span><span class="s">'HiThere'</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">NameError</span><span class="p">:</span> <span class="n">HiThere</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>If you need to determine whether an exception was raised but don’t intend to handle it, a simpler form of the raise statement allows you to <strong>re-raise</strong> the exception:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">raise</span> <span class="nb">NameError</span><span class="p">(</span><span class="s">'HiThere'</span><span class="p">)</span>
<span class="o">...</span> <span class="k">except</span> <span class="nb">NameError</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'An exception flew by!'</span>
<span class="o">...</span>     <span class="k">raise</span>
<span class="o">...</span>
<span class="n">An</span> <span class="n">exception</span> <span class="n">flew</span> <span class="n">by</span><span class="err">!</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">NameError</span><span class="p">:</span> <span class="n">HiThere</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h4 id="tryexceptelse">try…except…else</h4>

<p>an optional <code class="highlighter-rouge">else</code> clause, which, when present, must follow all <code class="highlighter-rouge">except</code> clauses.</p>

<p>如果 try block 中没有抛出exception，就执行 <code class="highlighter-rouge">else</code> block中的代码。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">IOError</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'cannot open'</span><span class="p">,</span> <span class="n">arg</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">arg</span><span class="p">,</span> <span class="s">'has'</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()),</span> <span class="s">'lines'</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="user-defined-exceptions">User-defined Exceptions</h3>

<ul>
  <li>从 Exception 类继承</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">MyError</span><span class="p">(</span><span class="nb">Exception</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="o">...</span>         <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
<span class="o">...</span>     <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="o">...</span>         <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">raise</span> <span class="n">MyError</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="o">...</span> <span class="k">except</span> <span class="n">MyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'My exception occurred, value:'</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">value</span>
<span class="o">...</span>
<span class="n">My</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">raise</span> <span class="n">MyError</span><span class="p">(</span><span class="s">'oops!'</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="n">__main__</span><span class="o">.</span><span class="n">MyError</span><span class="p">:</span> <span class="s">'oops!'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Error</span><span class="p">(</span><span class="nb">Exception</span><span class="p">):</span>
    <span class="s">"""Base class for exceptions in this module."""</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">InputError</span><span class="p">(</span><span class="n">Error</span><span class="p">):</span>
    <span class="s">"""Exception raised for errors in the input.

    Attributes:
        expr -- input expression in which the error occurred
        msg  -- explanation of the error
    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr</span> <span class="o">=</span> <span class="n">expr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span>

<span class="k">class</span> <span class="nc">TransitionError</span><span class="p">(</span><span class="n">Error</span><span class="p">):</span>
    <span class="s">"""Raised when an operation attempts a state transition that's not
    allowed.

    Attributes:
        prev -- state at beginning of transition
        next -- attempted new state
        msg  -- explanation of why the specific transition is not allowed
    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prev</span><span class="p">,</span> <span class="nb">next</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">prev</span>
        <span class="bp">self</span><span class="o">.</span><span class="nb">next</span> <span class="o">=</span> <span class="nb">next</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="defining-clean-up-actions-finally">Defining Clean-up Actions: <code class="highlighter-rouge">finally</code></h3>

<p>In real world applications, the finally clause is useful for releasing external resources (such as files or network connections), regardless of whether the use of the resource was successful.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">raise</span> <span class="nb">KeyboardInterrupt</span>
<span class="o">...</span> <span class="k">finally</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="s">'Goodbye, world!'</span>
<span class="o">...</span>
<span class="n">Goodbye</span><span class="p">,</span> <span class="n">world</span><span class="err">!</span>
<span class="nb">KeyboardInterrupt</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">try</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">result</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>
<span class="o">...</span>     <span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span> <span class="s">"division by zero!"</span>
<span class="o">...</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span> <span class="s">"result is"</span><span class="p">,</span> <span class="n">result</span>
<span class="o">...</span>     <span class="k">finally</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span> <span class="s">"executing finally clause"</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">divide</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">result</span> <span class="ow">is</span> <span class="mi">2</span>
<span class="n">executing</span> <span class="k">finally</span> <span class="n">clause</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">divide</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">division</span> <span class="n">by</span> <span class="n">zero</span><span class="err">!</span>
<span class="n">executing</span> <span class="k">finally</span> <span class="n">clause</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">divide</span><span class="p">(</span><span class="s">"2"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">)</span>
<span class="n">executing</span> <span class="k">finally</span> <span class="n">clause</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">in</span> <span class="n">divide</span>
<span class="nb">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">/</span><span class="p">:</span> <span class="s">'str'</span> <span class="ow">and</span> <span class="s">'str'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="predefined-clean-up-actions-with">Predefined Clean-up Actions: <code class="highlighter-rouge">with</code></h3>

<p>Some objects define standard clean-up actions.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"myfile.txt"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">line</span><span class="p">,</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h2 id="oop">OOP</h2>

<ul>
  <li>the class inheritance mechanism allows multiple base classes,</li>
  <li>a derived class can override any methods of its base class or classes,</li>
  <li>a method can call the method of a base class with the same name.</li>
  <li>classes are created at runtime, and can be modified further after creation.</li>
</ul>

<h3 id="namespace">Namespace</h3>

<ul>
  <li><strong>The namespace containing the built-in names</strong> is created when the Python interpreter starts up, and is never deleted.</li>
  <li><strong>The global namespace for a module</strong> is created when the module definition is read in; normally, module namespaces also last until the interpreter quits.</li>
</ul>

<p>At any time during execution, there are at least three nested scopes whose namespaces are directly accessible:</p>

<ul>
  <li>the innermost scope, which is searched first, contains the local names</li>
  <li>the scopes of any enclosing functions, which are searched starting with the nearest enclosing scope, contains non-local, but also non-global names</li>
  <li>the next-to-last scope contains the current module’s global names</li>
  <li>the outermost scope (searched last) is the namespace containing built-in names</li>
</ul>

<h3 id="定义类">定义类</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">ClassName</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">statement</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">&lt;</span><span class="n">statement</span><span class="o">-</span><span class="n">N</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ul>
  <li>When a class definition is left normally (via the end), a class object is created.</li>
</ul>

<h3 id="class-objects">Class Objects</h3>

<ul>
  <li>Class objects support two kinds of operations: attribute references and instantiation.</li>
  <li>类的方法第一个参数必须是 <code class="highlighter-rouge">self</code></li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="s">"""A simple example class"""</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">12345</span>

    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'hello world'</span>
</pre></td></tr></tbody></table>
</div>
</div>

<ul>
  <li>attribute <code class="highlighter-rouge">MyClass.__doc__</code> , returning the docstring belonging to the class: “A simple example class”.</li>
  <li>attribute <code class="highlighter-rouge">MyClass.i</code> , an integer</li>
  <li>attribute <code class="highlighter-rouge">MyClass.f</code> , a function object</li>
</ul>

<h3 id="class-instantiation-实例化--构造函数">Class instantiation 实例化 &amp; 构造函数</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="c"># The instantiation operation creates an empty object. </span>
<span class="c"># assigns this object to the local variable x.</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>构造函数名为 <code class="highlighter-rouge">__init__()</code> , class instantiation automatically invokes <strong>init</strong>() for the newly-created class instance.</p>

<ol>
  <li>构造函数，简单例子
    <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre> <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
  <li>构造函数，带参数的例子
    <div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre> <span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Complex</span><span class="p">:</span>
 <span class="o">...</span>     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">realpart</span><span class="p">,</span> <span class="n">imagpart</span><span class="p">):</span>
 <span class="o">...</span>         <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">realpart</span>
 <span class="o">...</span>         <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="n">imagpart</span>
 <span class="o">...</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Complex</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.5</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">i</span>
 <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.5</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
    </div>
  </li>
</ol>

<h3 id="instance-objects">Instance Objects</h3>

<ul>
  <li>The only operations understood by instance objects are attribute references</li>
  <li>There are two kinds of valid attribute names, <strong>data attributes</strong> and <strong>methods</strong>.</li>
</ul>

<h3 id="method-objects">Method Objects</h3>

<h2 id="python-编码规范">Python 编码规范</h2>

<p>For Python, <a href="https://www.python.org/dev/peps/pep-0008">PEP 8</a> has emerged as the style guide that most projects adhere to;</p>

<ul>
  <li>Use 4-space indentation, and no tabs.</li>
  <li>Wrap lines so that they don’t exceed 79 characters.</li>
  <li>Use blank lines to separate functions and classes, and larger blocks of code inside functions.</li>
  <li>When possible, put comments on a line of their own.</li>
  <li>Use docstrings.</li>
  <li>Use spaces around operators and after commas, but not directly inside bracketing constructs: <code class="highlighter-rouge">a = f(1, 2) + g(3, 4)</code>.</li>
  <li>use <code class="highlighter-rouge">CamelCase</code> for classes and <code class="highlighter-rouge">ower_case_with_underscores</code> for functions and methods.</li>
  <li></li>
  <li></li>
</ul>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags#python" title="Pages tagged python" class="tag"><span class="term">python</span></a></span>
        
        
      </footer>
    </div><!-- /.entry-content -->
    
    
    
  </article>
</div><!-- /#main -->
</div><!-- post container -->














<script type="text/javascript">
  // embeded-iframe
  $(window).load(function(){
    $('.embeded-iframe').each(function(){
      $(this).height($(this).contents().find('html').height());
    });
  });
</script>





<div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2023 wi. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

<script src="/assets/js/main.js?20230725301728281823445"></script>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
